<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: actions.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: actions.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var axios = require('axios');
var _ = require('lodash');
const END_POINT = "http://localhost:4002";

/**
 * @api {get} /products Retrieve  all products
 * @apiName RetrieveProducts
 * @apiGroup products
 * @apiPermission user
 * @apiSuccess {Object} result products.
 */

const getProducts = async() => {
  let res =  await axios.get(`${END_POINT}/products`);
  return res.data;
}

/**
 * @api {get} /users Retrieve  all products
 * @apiName RetrieveUsers
 * @apiGroup users
 * @apiPermission user
 * @apiSuccess {Object} result users.
 */
const getUsers = async() => {
   let res = await axios.get(`${END_POINT}/users`);
   return res.data;
}

/**
 * @api {post} /users Create a user
 * @apiName Createuser
 * @apiGroup users
 * @apiPermission user
 * @apiSuccess {Object} result user.
 */

const createUser = async (user) => {
  let res = await axios.post(`${END_POINT}/users`, user);
  return user;
}

/**
 * @api {post} /products Add a product
 * @apiName Addproduct
 * @apiGroup products
 * @apiPermission user
 * @apiParam {Object} user
 * @apiParamExample {json} Request-Example:
 * {"firstName": "Student","lastName": "One","email": "studentone@mail.com","phone": "988948989","password": "stud", "id": 3}
 * @apiSuccess {Object} result product.
 */

const addProduct = async(product) => {
     let res = await axios.post(`${END_POINT}/products`, product);
     return product;
}

/**
 * @api {put} /products Update a product
 * @apiName Updateproduct
 * @apiGroup product
 * @apiPermission user
 * @apiParam {Object} product
 * @apiParamExample {json} Request-Example:
 * {"title": "Caprese salad","description": "Homemade healthy caprese salad with tomato mozzarella and basil"}
 * @apiSuccess {Object} result product.
 */


const updateProduct = async(reqData) => {
  const id = reqData.id;
  const data = _.omit(reqData, ['id']);
  let res =  await axios.put(`${END_POINT}/products/${id}`, { title : data.title, description : data.description });
  console.log(res.data);
  return res.data;
}

/**
 * @api {delete} /products Delete a product
 * @apiName Deleteproduct
 * @apiGroup products
 * @apiPermission user
 * @apiSuccess {Boolean} success true or false
 */

const deleteProduct = async(data) => {
   const id = data.id;
   let res = await axios.delete(`${END_POINT}/products/${id}`);
  return true;
}

/**
 * @api {get} /users/id Get a user
 * @apiName Getuser
 * @apiGroup users
 * @apiPermission user
 * @apiSuccess {Object} result user.
 */

const getUserById = async(data) => {
     const id =  data.id;
     let res = await axios.get(`${END_POINT}/users/${id}`)
     return res.data;
}

/**
 * @api {get} /users?email&amp;&amp;passwoard Get a user
 * @apiName Getuser
 * @apiGroup users
 * @apiPermission user
 * @apiSuccess {Object} result user.
 */

const getUserByEmail = async(data) => {
  console.log(data);
     const email = data.email;
     const password = data.password
     let res = await axios.get(`${END_POINT}/users?email=${email}&amp;password=${password}`)
     if(res){
      return res.data[0]
     }
     else { return null }
     
}

/**
 * @api {get} /products/id Get a product
 * @apiName Getproduct
 * @apiGroup products
 * @apiPermission user
 * @apiSuccess {Object} result product.
 */

const getProductById = async(data) => {
  const id =  data.id;
  let res = await axios.get(`${END_POINT}/products/${id}`)
  return res.data;
}

module.exports = {createUser, getProducts, getUsers, updateProduct, deleteProduct, getUserById, getUserByEmail, getProductById, addProduct};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addProduct">addProduct</a></li><li><a href="global.html#createUser">createUser</a></li><li><a href="global.html#deleteProduct">deleteProduct</a></li><li><a href="global.html#getProductById">getProductById</a></li><li><a href="global.html#getProducts">getProducts</a></li><li><a href="global.html#getUserByEmail">getUserByEmail</a></li><li><a href="global.html#getUserById">getUserById</a></li><li><a href="global.html#getUsers">getUsers</a></li><li><a href="global.html#updateProduct">updateProduct</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Fri Jun 26 2020 15:03:00 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
